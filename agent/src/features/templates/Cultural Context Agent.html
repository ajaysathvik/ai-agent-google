<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
     SCREEN 1: MAIN CHAT
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div class="screen" id="screen-main">

  <nav class="nav">
    <div class="nav-left">
      <button class="nav-icon-btn" title="Sidebar">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8">
          <rect x="3" y="3" width="18" height="18" rx="3"/>
          <line x1="9" y1="3" x2="9" y2="21"/>
        </svg>
      </button>
      <button class="nav-icon-btn" id="clear-all-button" title="New chat">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8">
          <path d="M12 5v14M5 12h14"/>
        </svg>
      </button>
    </div>

    <div class="nav-center">
      <button class="get-plus-btn" onclick="goTo('screen-voice-select')">
        <svg width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.2">
          <path d="M12 5v14M5 12h14"/>
        </svg>
        Get Plus
      </button>
    </div>

    <div class="nav-right">
      <div id="connection-status" class="flex items-center text-xs font-semibold mr-2">
        <span class="status-dot status-ready inline-block w-2 h-2 rounded-full mr-1 bg-green-400"></span>
        <span>Ready</span>
      </div>
      <button class="temporary-btn">
        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="12" cy="12" r="9"/>
          <path d="M12 7v5l3 3"/>
        </svg>
        Temporary
      </button>
      <button class="avatar-btn">U</button>
    </div>
  </nav>

  <div class="main-content" style="flex: 1; display: flex; flex-direction: column; justify-content: space-between; padding-bottom: 40px; height: calc(100vh - 52px);">
    <h1 class="main-heading mt-10 transition-all duration-300" id="main-heading">What can I help with?</h1>

    <!-- Chat history container (hidden initially or empty) -->
    <div id="messages-container" class="w-full max-w-2xl mx-auto flex-1 overflow-y-auto px-4 py-2 space-y-4 text-sm" style="scroll-behavior: smooth;">
    </div>

    <div class="w-full flex justify-center mt-auto">
      <div class="input-wrap w-full max-w-2xl transition-all duration-300">
        <textarea id="user-input" class="input-field" rows="1" placeholder="Ask anything"></textarea>
        <div class="input-bottom">
          <div class="input-bottom-left">
            <button class="input-pill" id="upload-button">
              <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M12 5v14M5 12h14"/>
              </svg>
            </button>
            <input type="file" id="image-upload-input" accept="image/*" multiple class="hidden" />
            <button class="input-pill" id="camera-button">
              <svg width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path stroke-linecap="round" stroke-linejoin="round" d="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z" />
              </svg>
              Camera
            </button>
          </div>
          <div class="input-bottom-right flex items-center gap-2">
            <button class="bell-btn" id="screen-share-button" title="Screen Share">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />
              </svg>
            </button>
            <button class="bell-btn hidden" id="send-button" title="Send" style="display:none;">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <line x1="22" y1="2" x2="11" y2="13"></line>
                <polygon points="22 2 15 22 11 13 2 9 22 2"></polygon>
              </svg>
            </button>
            <button class="mic-btn-main" id="nav-voice-btn" onclick="goTo('screen-voice'); document.getElementById('voice-button').click();">
              <svg viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2">
                <rect x="9" y="2" width="6" height="12" rx="3"/>
                <path d="M5 10a7 7 0 0 0 14 0"/>
                <line x1="12" y1="19" x2="12" y2="22"/>
                <line x1="8" y1="22" x2="16" y2="22"/>
              </svg>
            </button>
            <!-- Hidden original voice button to keep JS mapping happy if possible, or we just map it directly. -->
            <button id="voice-button" style="display:none;"></button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="footer-hint">
    AI can make mistakes. <span>Check important info.</span>
  </div>

  <!-- Camera Container (Floating) -->
  <div id="camera-container" class="fixed bottom-[100px] right-[20px] w-[240px] rounded-xl overflow-hidden shadow-2xl bg-black z-50 text-white" style="display: none;">
      <video id="camera-video" autoplay playsinline class="w-full h-auto object-cover"></video>
  </div>

  <!-- Upload Preview Container -->
  <div id="upload-preview-container" style="display: none;" class="fixed bottom-[120px] left-1/2 -translate-x-1/2 bg-white p-3 rounded-xl shadow-lg border border-gray-200 z-50">
      <div class="flex items-center justify-between mb-2">
          <span class="text-sm font-semibold text-gray-700">
              <span id="upload-count">0</span> Image(s) Attached
          </span>
          <button id="remove-upload-btn" class="text-red-500 hover:text-red-700 text-xs font-bold uppercase ml-4">Remove</button>
      </div>
      <div id="upload-preview-grid" class="flex gap-2 max-w-md overflow-x-auto"></div>
  </div>

</div>


<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
     SCREEN 2: VOICE MODE
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div class="screen" id="screen-voice">

  <div class="voice-nav">
    <div class="voice-nav-right">
      <button class="v-icon-btn" onclick="showModal()">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8">
          <circle cx="12" cy="12" r="9"/>
          <path d="M12 8v4M12 16h.01"/>
        </svg>
      </button>
      <button class="v-icon-btn" onclick="goTo('screen-voice-select')">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8">
          <circle cx="12" cy="8" r="4"/>
          <path d="M4 20c0-4 3.6-7 8-7s8 3 8 7"/>
        </svg>
      </button>
    </div>
  </div>

  <div class="voice-main">
    <div class="orb-container">
      <div class="orb-ring"></div>
      <div class="orb-ring"></div>
      <div class="orb-ring"></div>
      <div class="orb listening" id="mainOrb"></div>
    </div>

    <div class="access-hint">
      <span>Enable microphone access in</span>
      <a class="access-link" onclick="showModal()">Settings</a>
      <div class="hint-icon">?</div>
    </div>
  </div>

  <div class="voice-controls">
    <div class="ended-toast">
      <span class="toast-icon">üéô</span>
      <span>Voice chat ended</span>
      <span style="font-size:11px;color:#aaa;margin-left:2px">00:12</span>
      <div class="toast-actions">
        <button class="toast-btn" title="Thumbs up">üëç</button>
        <button class="toast-btn" title="Thumbs down">üëé</button>
        <button class="toast-btn" onclick="goTo('screen-main')" title="Close">‚úï</button>
      </div>
    </div>

    <div class="vc-btn-row">
      <button class="vc-mic-btn" id="micToggle" onclick="document.getElementById('voice-button').click(); toggleMic();">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <rect x="9" y="2" width="6" height="12" rx="3"/>
          <path d="M5 10a7 7 0 0 0 14 0"/>
          <line x1="12" y1="19" x2="12" y2="22"/>
          <line x1="8" y1="22" x2="16" y2="22"/>
        </svg>
      </button>
      <button class="vc-close-btn" onclick="document.getElementById('voice-button').click(); goTo('screen-main');">‚úï</button>
    </div>
  </div>

  <!-- Modal -->
  <div class="modal-backdrop" id="micModal">
    <div class="modal">
      <button class="modal-close" onclick="hideModal()">‚úï</button>
      <h3>Microphone capability</h3>
      <p>This application will request microphone access when you start voice mode.</p>
    </div>
  </div>
</div>


<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
     SCREEN 3: CHOOSE VOICE
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div class="screen" id="screen-voice-select">

  <div class="vs-nav">
    <button class="v-icon-btn" onclick="goTo('screen-voice')">
      <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8">
        <path d="M18 6L6 18M6 6l12 12"/>
      </svg>
    </button>
  </div>

  <div class="vs-main">
    <h2 class="vs-title">Choose a voice</h2>

    <div class="vs-avatars">
      <div class="vs-avatar" onclick="selectAvatar(0, this)"></div>
      <div class="vs-avatar" onclick="selectAvatar(1, this)"></div>
      <div class="vs-avatar selected" onclick="selectAvatar(2, this)"></div>
      <div class="vs-avatar" onclick="selectAvatar(3, this)"></div>
    </div>

    <div class="vs-carousel">
      <div class="carousel-side" onclick="prevVoice()">
        <div class="c-name" id="prevVoiceName">Monday</div>
        <div class="c-tag" id="prevVoiceTag">Balanced</div>
      </div>
      <button class="carousel-arrow" onclick="prevVoice()">‚Äπ</button>
      <div class="carousel-center">
        <div class="c-name" id="curVoiceName">Juniper</div>
        <div class="c-tag" id="curVoiceTag">Open and upbeat</div>
      </div>
      <button class="carousel-arrow" onclick="nextVoice()">‚Ä∫</button>
      <div class="carousel-side" onclick="nextVoice()">
        <div class="c-name" id="nextVoiceName">Arbor</div>
        <div class="c-tag" id="nextVoiceTag">Engaging and calming</div>
      </div>
    </div>

    <div class="vs-actions">
      <button class="vs-done-btn" onclick="goTo('screen-voice')">Done</button>
      <button class="vs-cancel-btn" onclick="goTo('screen-voice')">Cancel</button>
    </div>
  </div>
</div>
